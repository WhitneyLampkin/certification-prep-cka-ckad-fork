<h1 align="center" style="border-bottom: none">
    <a href="https://github.com/mx-ulises/certification-prep-cka-ckad" target="_blank">
        <img alt="" src="https://github.com/mx-ulises/certification-prep-cka-ckad/blob/main/assets/notes-logo.png?raw=true" style="border-radius: 50%; height: 100px;">
    </a>
    <br>
    Istio Topic 1: Istio Installation
</h1>
<h3 align="center" style="border-bottom: none">
    Notes by: <a href="https://github.com/mx-ulises" target="_blank">Ulises Martinez</a>
</h3>
<hr />

<p align="center">
    Auto-generated by the <a href="https://github.com/WhitneyLampkin/devscriber" target="_blank">DevScriber</a> command-line tool.
</p>

<div align="center">

![GitHub language count](https://img.shields.io/github/languages/count/mx-ulises/certification-prep-cka-ckad?label=Languages)
![GitHub contributors](https://img.shields.io/github/contributors/mx-ulises/certification-prep-cka-ckad?label=Contributors&color=yellow)
![GitHub repo size](https://img.shields.io/github/repo-size/mx-ulises/certification-prep-cka-ckad?label=Repo%20Size&color=teal)
![GitHub repo file count (file type)](https://img.shields.io/github/directory-file-count/mx-ulises/certification-prep-cka-ckad?label=Files&color=purple)

</div>

## Introduction

These notes cover topics on how to install and configure Istio with the `istioctl` tools, including profiles and operators. Relevant documentations includes the following:

 * [Documentation](https://istio.io/latest/docs/) > [Setup](https://istio.io/latest/docs/setup/) > [Install](https://istio.io/latest/docs/setup/install/) > [Install with Istioctl](https://istio.io/latest/docs/setup/install/istioctl/)
 * [Documentation](https://istio.io/latest/docs/) > [Setup](https://istio.io/latest/docs/setup/) > [Install](https://istio.io/latest/docs/setup/install/) > [Istio Operator Install](https://istio.io/latest/docs/setup/install/operator/)
 * [Documentation](https://istio.io/latest/docs/) > [Reference](https://istio.io/latest/docs/reference/) > [Configuration](https://istio.io/latest/docs/reference/config/) > [IstioOperator Options](https://istio.io/latest/docs/reference/config/istio.operator.v1alpha1/)

## Basic default installation

Istio can be easily installed with the default configuration using this command:

```
istioctl install
```

## Install a different profile

Istio can be customized with different profiles that would install different Istio components at different configurations using the flag `--set profile=<profile>`. For example, to install the `demo` profile, it can be used like this:

```
istioctl install --set profile=demo
```

## Install with different spec configurations

Various settings can be modified while installing istio ussing the `--set` flag along with the path to the configuration to be configured and the desired value. For example, this installation would configure access log for the mesh config:

```
istioctl install --set meshConfig.accessLogFile=/dev/stdout
```

Use the [IstioOperator Options](https://istio.io/latest/docs/reference/config/istio.operator.v1alpha1/) documentation to determine the spec path of specific configurations to set.

## Install with `IstioOperator` install manifest file

The most convenient way to install istio with custom configurations is to use a `IstioOperator` manifest file. With this, we can edit the configurations needed for each component or configuration of the Istio setup and apply that at installation time. This is an example of an `IstioOperator` manifest file that includes overwrites in resources and mesh configuration setups:

```
apiVersion: install.istio.io/v1alpha1
kind: IstioOperator
spec:
  meshConfig:
    accessLogFile: /dev/stdout
  components:
    ingressGateways:
    - name: istio-ingressgateway
      enabled: true
      k8s:
        resources:
          requests:
            cpu: 200m
            memory: 101Mi
```

To generate a template based on a profile, use the following command:

```
istioctl profile dump demo
```

Modify the configurations you need from this file by using the [IstioOperator Options](https://istio.io/latest/docs/reference/config/istio.operator.v1alpha1/) documentation as reference on configurations available.

To install istio with this configuration, we can use:

```
istioctl install -f my-config.yaml
```

<p align="center" style="border-bottom: none; margin-top: 50px;">
    <a href="https://github.com/mx-ulises/certification-prep-cka-ckad" target="_blank">
        <img alt="" src="https://github.com/mx-ulises/certification-prep-cka-ckad/blob/main/assets/notes-logo.png?raw=true" style="border-radius: 50%; height: 100px;">
    </a>
</p>
