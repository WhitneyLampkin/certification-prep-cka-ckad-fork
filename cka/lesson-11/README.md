<h1 align="center" style="border-bottom: none">
    <a href="https://github.com/mx-ulises/certification-prep-cka-ckad" target="_blank">
        <img alt="" src="https://github.com/mx-ulises/certification-prep-cka-ckad/blob/main/assets/notes-logo.png?raw=true" style="border-radius: 50%; height: 100px;">
    </a>
    <br>
    CKA Lesson 11: Logging, Monitoring and Troubleshooting
</h1>
<h3 align="center" style="border-bottom: none">
    Notes by: <a href="https://github.com/mx-ulises" target="_blank">Ulises Martinez</a>
</h3>
<hr />

<p align="center">
    Auto-generated by the <a href="https://github.com/WhitneyLampkin/devscriber" target="_blank">DevScriber</a> command-line tool.
</p>

<div align="center">

![GitHub language count](https://img.shields.io/github/languages/count/mx-ulises/certification-prep-cka-ckad?label=Languages)
![GitHub contributors](https://img.shields.io/github/contributors/mx-ulises/certification-prep-cka-ckad?label=Contributors&color=yellow)
![GitHub repo size](https://img.shields.io/github/repo-size/mx-ulises/certification-prep-cka-ckad?label=Repo%20Size&color=teal)
![GitHub repo file count (file type)](https://img.shields.io/github/directory-file-count/mx-ulises/certification-prep-cka-ckad?label=Files&color=purple)

</div>

## Introduction

In this lesson we will learn how monitor Kubernetes Resources and learn how to troubleshoot applications, cluster nodes and application access.

## Monitoring Kubernetes Resources

The `kubectl get` and `kubectl describe` commands can be used on any resources to show generic resource health. If metrics are collected, `kubectl top pods` and `kubectl top nodes` can be used to get performance-related information about `Pod` and nodes.

## Troubleshooting

Resources are first created in the Kubernetes `etcd`, and after this, we can use `kubectl describe` and `kubectl events` to see how that has being going (if it failed). After adding the resources to the database, the `Pod` is started on the nodes where it is scheduled. Before a `Pod` can started, the image needs to be fetched, `sudo cri images` can get a list of images. Once the application is started, we can use `kubectl logs` to read applications logs.

### ‚≠ê Troubleshooting Applications

Use this flow to troubleshoot `Pod`:

 1. Use `kubectl get`, which will give a generic overview of `Pod` state. A Pod can be in any of the following states:
    - `Pending`: The `Pod` has been created, but it is waiting for an elegible node. If taints, quota or selectors are set in place, this would be the reason that the `Pod` is stuck here.
    - `Running`: The `Pod` is in a healthy state
    - `Succeeded`: The `Pod` has done its work and there is no need to restart it.
    - `Failed`: One or more containers in the `Pod` have ended with an error code and will not be restarted
    - `Unknown`: The state could not be obtained, and it could be related to network issues.
    - `Completed`: The `Pod` has run to completition
    - `CrashLoopBackOff`: One or more containers in the `Pod` have generated an error, but the scheduler is still trying to run them.
 1. If an issue is indicated, the next step is to use `kubectl describe` to get more information. It will show API information about resource and ofthen has good indicators of what went wrong.
 1. If we find that a `Pod` has issues starting its primary container, then we should use `kubectl logs` to investigate the application logs.
 1. If the `Pod` is running, but not behaving as expected, we can open an interactive shell on the `Pod` for further troubleshooting: `kubectl exec -it <podName> -- sh`

<p align="center" style="border-bottom: none; margin-top: 50px;">
    <a href="https://github.com/mx-ulises/certification-prep-cka-ckad" target="_blank">
        <img alt="" src="https://github.com/mx-ulises/certification-prep-cka-ckad/blob/main/assets/notes-logo.png?raw=true" style="border-radius: 50%; height: 100px;">
    </a>
</p>
